# Put parameters here that don't need to change on each machine where the app is deployed
# https://symfony.com/doc/current/best_practices/configuration.html#application-related-configuration
parameters:
    locale: 'en'

services:
    l3l0labs.accounting.repository.invoice:
        class: L3l0Labs\Adapters\Doctrine\Accounting\Invoice\InvoiceRegistry
        arguments:
            - '@doctrine.orm.default_entity_manager'

    l3l0labs.accounting.view.invoice:
        class: L3l0Labs\Adapters\Doctrine\Accounting\Invoice\InvoiceViewRegistry
        arguments:
            - '@database_connection'

    l3l0labs.accounting.use_case.issue_invoice:
        class: L3l0Labs\Accounting\UseCase\IssueInvoice
        arguments:
            - '@l3l0labs.accounting.repository.invoice'

    l3l0labs.system_access.repository.user:
        class: L3l0Labs\Adapters\Doctrine\SystemAccess\Users
        arguments:
            - '@doctrine.orm.default_entity_manager'

    l3l0labs.app.security.user_provider:
        class: App\Security\UserProvider
        arguments:
          - '@l3l0labs.system_access.repository.user'

    l3l0labs.app.security.user_case.register_user:
        class: L3l0Labs\SystemAccess\UseCase\RegisterUser
        arguments:
          - '@l3l0labs.system_access.repository.user'

    l3l0labs.app.security.user_case.register_user_email_validator:
        class: App\FormValidator\UserAlreadyExistConstraintValidator
        arguments:
          - '@l3l0labs.system_access.repository.user'
        tags:
          - { name: validator.constraint_validator }